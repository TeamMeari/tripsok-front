import { useState } from "react";
import Input from "../../common/Input";
import styles from "./passwordInput.module.css";

interface PasswordInputProps {
    placeholder: string;
    onChange: (e: React.ChangeEvent<HTMLInputElement>) => void;
}

const EyeButton = ({ isVisible, onClick }: { isVisible: boolean, onClick: () => void }) => {
    return (
        <button className={styles.eyeButton} onClick={onClick}>
            {isVisible ? (
                <svg width="22" height="14" viewBox="0 0 22 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M11.2188 13.5469C10.1771 13.5469 9.1901 13.4219 8.25781 13.1719C7.33073 12.9219 6.47396 12.5885 5.6875 12.1719C4.90104 11.7552 4.19271 11.2969 3.5625 10.7969C2.9375 10.2917 2.40104 9.78906 1.95312 9.28906C1.51042 8.78906 1.17188 8.32552 0.9375 7.89844C0.708333 7.46615 0.59375 7.11979 0.59375 6.85938C0.59375 6.59375 0.708333 6.2474 0.9375 5.82031C1.17188 5.39323 1.51042 4.92708 1.95312 4.42188C2.40104 3.91667 2.9375 3.41667 3.5625 2.92188C4.19271 2.42188 4.90104 1.96354 5.6875 1.54688C6.47396 1.13021 7.33073 0.796875 8.25781 0.546875C9.1901 0.291667 10.1771 0.164062 11.2188 0.164062C12.276 0.164062 13.2708 0.291667 14.2031 0.546875C15.1354 0.796875 15.9948 1.13021 16.7812 1.54688C17.5729 1.96354 18.2786 2.42188 18.8984 2.92188C19.5234 3.41667 20.0547 3.91667 20.4922 4.42188C20.9349 4.92708 21.2708 5.39323 21.5 5.82031C21.7292 6.2474 21.8438 6.59375 21.8438 6.85938C21.8438 7.11979 21.7292 7.46615 21.5 7.89844C21.2708 8.32552 20.9349 8.78906 20.4922 9.28906C20.0547 9.78906 19.526 10.2917 18.9062 10.7969C18.2865 11.2969 17.5807 11.7552 16.7891 12.1719C16.0026 12.5885 15.1406 12.9219 14.2031 13.1719C13.2708 13.4219 12.276 13.5469 11.2188 13.5469ZM11.2188 11.1484C11.8125 11.1484 12.3672 11.0391 12.8828 10.8203C13.4036 10.5964 13.8594 10.2865 14.25 9.89062C14.6458 9.49479 14.9531 9.03906 15.1719 8.52344C15.3958 8.00781 15.5078 7.45312 15.5078 6.85938C15.5078 6.26562 15.3958 5.71094 15.1719 5.19531C14.9531 4.67969 14.6458 4.22396 14.25 3.82812C13.8594 3.43229 13.4036 3.125 12.8828 2.90625C12.3672 2.68229 11.8125 2.57031 11.2188 2.57031C10.6302 2.57031 10.0755 2.68229 9.55469 2.90625C9.03906 3.125 8.58333 3.43229 8.1875 3.82812C7.79688 4.22396 7.48958 4.67969 7.26562 5.19531C7.04167 5.71094 6.92969 6.26562 6.92969 6.85938C6.92969 7.45312 7.04167 8.00781 7.26562 8.52344C7.48958 9.03906 7.79688 9.49479 8.1875 9.89062C8.58333 10.2865 9.03906 10.5964 9.55469 10.8203C10.0755 11.0391 10.6302 11.1484 11.2188 11.1484ZM11.2188 8.46875C10.776 8.46875 10.3984 8.3125 10.0859 8C9.77344 7.6875 9.61719 7.30729 9.61719 6.85938C9.61719 6.41146 9.77344 6.03125 10.0859 5.71875C10.3984 5.40625 10.776 5.25 11.2188 5.25C11.6615 5.25 12.0391 5.40625 12.3516 5.71875C12.6693 6.03125 12.8281 6.41146 12.8281 6.85938C12.8281 7.30729 12.6693 7.6875 12.3516 8C12.0391 8.3125 11.6615 8.46875 11.2188 8.46875Z" fill="#666666"/>
                </svg>
            ) : (
                <svg width="22" height="15" viewBox="0 0 22 15" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M11.2188 1.16406C12.276 1.16406 13.2708 1.29167 14.2031 1.54688C15.1354 1.79688 15.9948 2.13021 16.7812 2.54688C17.5729 2.96354 18.2812 3.42188 18.9062 3.92188C19.5312 4.41667 20.0625 4.91667 20.5 5.42188C20.9375 5.92708 21.2708 6.39323 21.5 6.82031C21.7292 7.2474 21.8438 7.59375 21.8438 7.85938C21.8438 8.15104 21.6953 8.55208 21.3984 9.0625C21.1068 9.56771 20.6849 10.1094 20.1328 10.6875C19.5807 11.2656 18.9167 11.8203 18.1406 12.3516L15.1875 9.40625C15.2917 9.17188 15.3698 8.92448 15.4219 8.66406C15.4792 8.40365 15.5078 8.13542 15.5078 7.85938C15.5078 7.26562 15.3958 6.71094 15.1719 6.19531C14.9531 5.67969 14.6458 5.22396 14.25 4.82812C13.8594 4.43229 13.4036 4.125 12.8828 3.90625C12.3672 3.68229 11.8125 3.57031 11.2188 3.57031C10.9479 3.57031 10.6823 3.59896 10.4219 3.65625C10.1615 3.71354 9.91146 3.79167 9.67188 3.89062L7.55469 1.77344C8.11198 1.58594 8.69792 1.4375 9.3125 1.32812C9.93229 1.21875 10.5677 1.16406 11.2188 1.16406ZM13.7891 8L11.0703 5.28906C11.4661 5.25781 11.8333 5.3125 12.1719 5.45312C12.5156 5.59375 12.8125 5.79688 13.0625 6.0625C13.3177 6.32292 13.5104 6.6224 13.6406 6.96094C13.7708 7.29948 13.8203 7.64583 13.7891 8ZM11.2188 10.4453C10.7448 10.4453 10.3125 10.3281 9.92188 10.0938C9.53125 9.85938 9.21875 9.54948 8.98438 9.16406C8.75 8.77344 8.63281 8.33854 8.63281 7.85938C8.63281 7.70833 8.65104 7.54948 8.6875 7.38281L11.6953 10.3906C11.5391 10.4271 11.3802 10.4453 11.2188 10.4453ZM11.2188 14.5469C10.1771 14.5469 9.1901 14.4219 8.25781 14.1719C7.33073 13.9219 6.47396 13.5885 5.6875 13.1719C4.90104 12.7552 4.19271 12.2969 3.5625 11.7969C2.9375 11.2917 2.40104 10.7891 1.95312 10.2891C1.51042 9.78906 1.17188 9.32552 0.9375 8.89844C0.708333 8.46615 0.59375 8.11979 0.59375 7.85938C0.59375 7.63021 0.682292 7.33854 0.859375 6.98438C1.04167 6.625 1.30208 6.23177 1.64062 5.80469C1.97917 5.3776 2.39062 4.94271 2.875 4.5C3.35938 4.05208 3.90885 3.63021 4.52344 3.23438L7.35156 6.04688C7.21615 6.32292 7.11198 6.61458 7.03906 6.92188C6.96615 7.22396 6.92969 7.53646 6.92969 7.85938C6.92969 8.45312 7.04167 9.00781 7.26562 9.52344C7.48958 10.0391 7.79688 10.4948 8.1875 10.8906C8.58333 11.2865 9.03906 11.5964 9.55469 11.8203C10.0755 12.0391 10.6302 12.1484 11.2188 12.1484C11.5417 12.1484 11.8542 12.112 12.1562 12.0391C12.4635 11.9661 12.7526 11.862 13.0234 11.7266L15.1719 13.8594C14.5729 14.0729 13.9427 14.2396 13.2812 14.3594C12.6198 14.4844 11.9323 14.5469 11.2188 14.5469ZM17.3984 14.7656L4.15625 1.53906C4.03646 1.41927 3.97656 1.27344 3.97656 1.10156C3.97656 0.924479 4.03646 0.776042 4.15625 0.65625C4.27604 0.536458 4.42448 0.476562 4.60156 0.476562C4.77865 0.476562 4.92448 0.536458 5.03906 0.65625L18.2734 13.8828C18.3984 14.0078 18.4609 14.1536 18.4609 14.3203C18.4661 14.487 18.4036 14.6354 18.2734 14.7656C18.1536 14.8958 18.0078 14.9583 17.8359 14.9531C17.6641 14.9531 17.5182 14.8906 17.3984 14.7656Z" fill="#666666"/>
                </svg>
            )}
        </button>
    )
}

const PasswordInput = ({ placeholder, onChange }: PasswordInputProps) => {
    const [isVisible, setIsVisible] = useState(false);
    return (
        <div>
            <Input
                type={isVisible ? "text" : "password"}
                placeholder={placeholder}
                onChange={onChange}
                rightButton={<EyeButton isVisible={isVisible} onClick={() => setIsVisible(!isVisible)} />}
            />
        </div>
    );
};

export default PasswordInput;